import TechnologySpecsBatteryMetadata from '@/models/Project/TechnologySpecs/TechnologySpecsBattery';
import CriticalLoadTimeSeries from '@/models/TimeSeries/CriticalLoadTimeSeries';
import SiteLoadTimeSeries from '@/models/TimeSeries/SiteLoadTimeSeries';
import PVGenerationTimeSeries from '@/models/TimeSeries/PVGenerationTimeSeries';
import {
  TECH_SPECS_BATTERY,
  TECH_SPECS_PV,
  TECH_SPECS_PV_DATA_GENERATION,
} from '@/router/constants';

import { ADD_GENERATION_PROFILE_TO_TECHNOLOGY_SPECS_PV } from '@/store/actionTypes';

import { pvGen, criticalLoad, siteLoad } from '@/assets/cases/billReduction/csvs';

const defaultBatteryCyclesObject = TechnologySpecsBatteryMetadata
  .getHardcodedMetadata().getDefaultValues().associatedInputs;

export const billReductionCompleteness = {
  overview: {
    start: true,
    objectives: true,
    technologySpecs: true,
  },
  components: {
    objectives: {
      siteInformation: true,
      resilience: true,
    },
    financial: {
      inputs: true,
      retailTariff: true,
      externalIncentives: true,
    },
  },
};

export const billReductionErrorList = {
  overview: {
    start: [],
    objectives: [],
    technologySpecs: [],
  },
  components: {
    objectives: {
      siteInformation: [],
      resilience: [],
    },
    financial: {
      inputs: [],
      retailTariff: [],
      externalIncentives: [],
    },
  },
};

// TODO turn this into a function
export const billReductionProject = {
  analysisHorizon: 20,
  analysisHorizonMode: '1',
  tsCriticalLoad: new CriticalLoadTimeSeries(criticalLoad),
  dataYear: 2017,
  financeDiscountRate: 6,
  energyPriceSourceWholesale: false,
  financeFederalTaxRate: 0,
  gridLocation: 'Customer',
  financeInflationRate: 2.2,
  name: 'Economic BTM DER Sizing - Use Case 1',
  listOfActiveServices: ['Resilience', 'RetailDemandChargeReduction'],
  objectivesBackupPower: false,
  objectivesDA: false,
  objectivesDeferral: false,
  objectivesFR: false,
  objectivesLoadFollowing: false,
  objectivesNSR: false,
  objectivesResilience: true,
  objectivesRetailDemandChargeReduction: true,
  objectivesRetailEnergyChargeReduction: true,
  objectivesSR: false,
  objectivesUserDefined: false,
  includeSiteLoad: true,
  includeInterconnectionConstraints: false,
  maxImport: -10000000000,
  maxExport: 10000000000,
  ownership: 'Customer',
  financePropertyTaxRate: 0,
  reliabilityTarget: 1,
  reliabilityPostOptimizationOnly: true,
  reliabilityMaxOutageDuration: 24,
  retailTariffBillingPeriods: [
    {
      id: 1,
      startMonth: 1,
      endMonth: 5,
      startTime: 1,
      endTime: 8,
      weekday: 1,
      value: 0.054152,
      chargeType: 'Energy',
      name: 'Winter Offpeak',
      complete: true,
    },
    {
      id: 2,
      startMonth: 1,
      endMonth: 5,
      startTime: 9,
      endTime: 21,
      weekday: 1,
      value: 0.062392,
      chargeType: 'Energy',
      name: 'Winter Mid-peak',
      complete: true,
    },
    {
      id: 3,
      startMonth: 1,
      endMonth: 5,
      startTime: 22,
      endTime: 24,
      weekday: 1,
      value: 0.054152,
      chargeType: 'Energy',
      name: 'Winter Offpeak',
      complete: true,
    },
    {
      id: 4,
      startMonth: 1,
      endMonth: 5,
      startTime: 1,
      endTime: 24,
      weekday: 0,
      value: 0.054152,
      chargeType: 'Energy',
      name: 'Winter Weekend',
      complete: true,
    },
    {
      id: 5,
      startMonth: 6,
      endMonth: 9,
      startTime: 1,
      endTime: 8,
      weekday: 1,
      value: 0.049672,
      chargeType: 'Energy',
      name: 'Summer Offpeak',
      complete: true,
    },
    {
      id: 6,
      startMonth: 6,
      endMonth: 9,
      startTime: 9,
      endTime: 12,
      weekday: 1,
      value: 0.086152,
      chargeType: 'Energy',
      name: 'Summer Mid-peak',
      complete: true,
    },
    {
      id: 7,
      startMonth: 6,
      endMonth: 9,
      startTime: 13,
      endTime: 18,
      weekday: 1,
      value: 0.262392,
      chargeType: 'Energy',
      name: 'Summer Peak',
      complete: true,
    },
    {
      id: 8,
      startMonth: 6,
      endMonth: 9,
      startTime: 19,
      endTime: 23,
      weekday: 1,
      value: 0.086152,
      chargeType: 'Energy',
      name: 'Summer Mid-peak',
      complete: true,
    },
    {
      id: 9,
      startMonth: 6,
      endMonth: 9,
      startTime: 24,
      endTime: 24,
      weekday: 1,
      value: 0.049672,
      chargeType: 'Energy',
      name: 'Summer Offpeak',
      complete: true,
    },
    {
      id: 10,
      startMonth: 6,
      endMonth: 9,
      startTime: 1,
      endTime: 24,
      weekday: 0,
      value: 0.049672,
      chargeType: 'Energy',
      name: 'Summer Weekend',
      complete: true,
    },
    {
      id: 11,
      startMonth: 10,
      endMonth: 12,
      startTime: 1,
      endTime: 8,
      weekday: 1,
      value: 0.054152,
      chargeType: 'Energy',
      name: 'Winter Offpeak',
      complete: true,
    },
    {
      id: 12,
      startMonth: 10,
      endMonth: 12,
      startTime: 9,
      endTime: 21,
      weekday: 1,
      value: 0.062392,
      chargeType: 'Energy',
      name: 'Winter Peak',
      complete: true,
    },
    {
      id: 13,
      startMonth: 10,
      endMonth: 12,
      startTime: 22,
      endTime: 24,
      weekday: 1,
      value: 0.054152,
      chargeType: 'Energy',
      name: 'Winter Offpeak',
      complete: true,
    },
    {
      id: 14,
      startMonth: 10,
      endMonth: 12,
      startTime: 1,
      endTime: 24,
      weekday: 0,
      value: 0.054152,
      chargeType: 'Energy',
      name: 'Winter Weekend',
      complete: true,
    },
    {
      id: 15,
      startMonth: 1,
      endMonth: 12,
      startTime: 1,
      endTime: 24,
      weekday: 2,
      value: 7.016,
      chargeType: 'Demand',
      name: 'Demand Charge',
      complete: true,
    },
  ],
  tsSiteLoad: new SiteLoadTimeSeries(siteLoad),
  sizingEquipment: true,
  startYear: 2017,
  financeStateTaxRate: 0,
  technologySpecsSolarPV: [{
    active: true,
    allowGridCharge: true,
    associatedInputs: [{
      complete: true,
      ts: new PVGenerationTimeSeries(pvGen),
      displayName: 'Solar Generation Profile',
      errorList: [],
      path: TECH_SPECS_PV_DATA_GENERATION,
      actionSetName: ADD_GENERATION_PROFILE_TO_TECHNOLOGY_SPECS_PV,
    }],
    associatedInputsComplete: true,
    complete: true,
    componentSpecsComplete: true,
    constructionYear: 2017,
    cost: 1660,
    decomissioningCost: 0,
    errorList: [],
    expectedLifetime: 99,
    fixedOMCosts: 0,
    gamma: 43,
    id: '524bd961-1a12-43e0-b963-7f05e22ae5d5',
    includeCurtailment: false,
    includePPA: false,
    includeSizeLimits: false,
    inverterMax: 1000000000,
    isReplaceable: false,
    loc: 'AC',
    macrsTerm: 3,
    name: 'Installation 1',
    nu: 20,
    operationYear: 2017,
    path: TECH_SPECS_PV,
    ppaCost: null,
    ppaInflationRate: null,
    ratedCapacity: 1000,
    ratedCapacityMaximum: null,
    ratedCapacityMinimum: null,
    replacementCost: 100,
    replacementConstructionTime: 1,
    salvageValue: 0,
    salvageValueOption: 'User defined',
    shouldSize: false,
    tag: 'PV',
    technologyType: 'Intermittent Resource',
    ter: 7,
  }],
  technologySpecsBattery: [{
    active: true,
    associatedInputs: defaultBatteryCyclesObject,
    associatedInputsComplete: true,
    auxiliaryLoad: 0,
    calendarDegradationRate: 0,
    capitalCost: 0,
    capitalCostPerkW: 800,
    capitalCostPerkWh: 250,
    chargingCapacity: null,
    chargingCapacityMaximum: null,
    chargingCapacityMinimum: null,
    complete: true,
    componentSpecsComplete: true,
    constructionYear: 2017,
    dailyCycleLimit: 0,
    dischargingCapacity: null,
    dischargingCapacityMaximum: null,
    dischargingCapacityMinimum: null,
    decomissioningCost: 0,
    endOfLifeExpenses: 0,
    energyCapacity: 2000,
    energyCapacityMaximum: null,
    energyCapacityMinimum: null,
    expectedLifetime: 99,
    errorList: [],
    fixedOMCosts: 10,
    id: '024c07e1-4005-4423-99ac-6c95974ba836',
    includeAuxiliaryLoad: false,
    includeCycleDegradation: false,
    includeSizeLimits: false,
    isReplaceable: false,
    lowerSOCLimit: 0,
    macrsTerm: 3,
    maxDuration: 0,
    name: 'BESS 1',
    operationYear: 2017,
    path: TECH_SPECS_BATTERY,
    powerCapacity: null,
    powerCapacityMaximum: null,
    powerCapacityMinimum: null,
    replacementConstructionTime: 1,
    replacementCost: 0,
    replacementCostPerkW: 100,
    replacementCostPerkWh: 800,
    roundtripEfficiency: 91,
    salvageValue: 0,
    salvageValueOption: 'User defined',
    selfDischargeRate: 0,
    shouldDiffChargeDischarge: false,
    shouldEnergySize: true,
    shouldLimitDailyCycling: false,
    shouldMaxDuration: false,
    shouldPowerSize: true,
    stateOfHealth: 0,
    tag: 'Battery',
    targetSOC: 50,
    technologyType: 'Energy Storage System',
    ter: 7,
    upperSOCLimit: 100,
    variableOMCosts: 0,
  }],
  timestep: 60,
};

export default billReductionProject;
